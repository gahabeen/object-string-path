/*!
  * object-string-path v0.1.0
  * (c) 2020 Gabin Desserprit
  * @license MIT
  */
var ObjectStringPath=function(e){"use strict";const t=/^\^/,r=/({.*?})/gim;function n(e){return["number","string","symbol"].includes(typeof e)}function i(e){let t,r;function n(e){return"[object Object]"===Object.prototype.toString.call(e)}return!1!==n(e)&&(t=e.constructor,void 0===t||(r=t.prototype,!1!==n(r)))}function o(e){return"<~ARR~>"+e.join("<~ARR~>")+"<~ARR~>"}function s(e){const t=e.match(new RegExp("<~ARR~>","gim"));return t&&3===t.length}function c(e){return e.replace(/\./gim,"<~~~>").replace(/\[/gim,"<~OBRACK~>").replace(/\]/gim,"<~CBRACK~>")}function l(e){return e.replace(new RegExp("<~~~>","gim"),".").replace(new RegExp("<~OBRACK~>","gim"),"[").replace(new RegExp("<~CBRACK~>","gim"),"]")}function p(e){return String(e).replace(r,c).replace(/\[/g,".").replace(/^\./,"").replace(/]/g,"").split(".")}function u(e){return t=>{if((t=t.slice(1,-1)).length>0){const r=E(e,t,e);return Array.isArray(r)?o(r):r}return"undefined"}}function a(e,i,o){i=i||{},o=o||{};let c=e[0];const p={step:null,_steps:e.slice(1),failed:!1};if(["array","string","number"].includes(typeof c))if(c=""+c.trim(),c=l(c),c=c.replace(t,""),c=c.replace(r,u(o)),c.includes("undefined"))p.failed=!0;else if(s(c)||c.includes("=")){const e=s(c)?c.split("<~ARR~>").slice(1,-1):c.split("=").filter(Boolean).map(e=>e.trim());if(2===e.length){const[t,r]=e,n=f(i,t,r);void 0!==n?p.step=n:(p.failed=!0,console.warn(`Couldn't not find any index for ${t}=${r}`))}else p.failed=!0,console.warn(`Missing key or value to search for (keyValue:'${e})`)}else n(c)?p.step=c:p.failed=!0;else p.failed=!0,console.warn(`Propery couldn't be found (step: '${c}' and type is: '${typeof c}')`);return p}function f(e,t,r){for(let n of Object.keys(e))if(i(e[n])&&e[n][t]==r)return n}function g(e,t){return!(!n(t)||!i(e)&&!Array.isArray(e))&&t in e}function A(e,t){return n(t)&&(i(e)||Array.isArray(e))?e[t]:e&&void 0===t?e:void 0}function d(e,t,r){return n(t)&&(i(e)||Array.isArray(e))?(e[t]=r,e[t]):e&&null==t?(i(r)?Object.assign(e,r):e=r,e):void console.log("Couldn't not set "+t)}function R(e){return e={hasProp:g,getProp:A,getSteps:p,...e||{}},function(t,r,n){return function t(r,i){if(i.length>0){const{step:o,_steps:s,failed:c}=a(i,r,n);return!c&&(e.hasProp(r,o)&&t(e.getProp(r,o),s))}return!0}(t,e.getSteps(r))}}function P(e){return e={getProp:A,hasProp:g,getSteps:p,...e||{}},function(t,r,n){return function t(r,i){if(i.length>0){const{step:o,_steps:s,failed:c}=a(i,r,n);return!c&&e.hasProp(r,o)?t(e.getProp(r,o),s):void 0}return r}(t,e.getSteps(r))}}function y(e){return e={setProp:d,getProp:A,hasProp:g,getSteps:p,...e||{}},function(t,r,n,o){const s=e.getSteps(r),c=(t,r,n)=>{if(r.length>0){const{step:s,_steps:l,failed:p}=a(r,t,o);if(p)return;if(l.length>0){const r=e.getProp(t,s),{step:p}=a(l,r,o);Number.isInteger(+p)&&!i(r)?e.hasProp(t,s)&&Array.isArray(r)?c(r,l,n):c(e.setProp(t,s,[]),l,n):e.hasProp(t,s)&&i(r)?c(e.getProp(t,s),l,n):c(e.setProp(t,s,{}),l,n)}else e.setProp(t,s,n)}else e.setProp(t,void 0,n)};c(t,s,n)}}const h=R(),E=P(),m=y();return e.ARRAY_VALUE_SEPARATOR="<~ARR~>",e.CLOSED_BRACKET_PLACEHOLDER="<~CBRACK~>",e.DOT_PLACEHOLDER="<~~~>",e.OBJECT_KEY_PREFIX=t,e.OPEN_BRACKET_PLACEHOLDER="<~OBRACK~>",e.VARIABLE_PATH=r,e.escape=c,e.get=E,e.getIndexByChildKeyValue=f,e.getProp=A,e.has=h,e.hasProp=g,e.isObject=i,e.isStringifiedArray=s,e.isValidKey=n,e.makeGet=P,e.makeHas=R,e.makeSet=y,e.resolveStep=a,e.resolveVariable=u,e.set=m,e.setProp=d,e.splitPath=p,e.stringifyArray=o,e.unescape=l,e}({});
